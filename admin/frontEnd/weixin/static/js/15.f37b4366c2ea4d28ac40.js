webpackJsonp([15],{"1XS1":function(t,e,i){var n=i("q9b1");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("XkoO")("5387cb8e",n,!0)},"3SRS":function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),o=i("H4g7"),s=i("O07m"),d=i("bIIf"),A=i("DG/j"),l=i("Xy6p"),r=i("NYxO"),c=i("Umb+"),m=i.n(c);e.a={name:"videoDetail",components:{listBlock:o.a,listItem:s.a,mintLoadmoreTop:A.a,mintLoadmoreBottom:l.a,nullData:d.a},data:function(){return{info:{},comment_list:[],videoOptions:{},has_next:"",page:2,content:"",sheetVisible:!1,currentCommentId:"",autoFill:!1,isLoaded:!1,allLoaded:!1,topStatus:"",bottomStatus:"",tbsPlayer:null}},beforeRouteEnter:function(t,e,i){i(function(t){})},created:function(){this.getData()},mounted:function(){var t=this,e=void 0;$("#input-chat-speak").focus(function(){e=setInterval(function(){t.scrollToEnd()},500)}),$("#input-chat-speak").blur(function(){clearInterval(e)})},methods:{getData:function(t){var e=this,i=this.api.weiboIndex();this.axios.get(i,{params:{weibo_id:this.$route.query.weibo_id}}).then(function(i){1==i.data.status?(e.info=i.data.info,e.comment_list=i.data.comment_list,e.page=2,e.has_next=i.data.has_next,e.$nextTick(function(){t&&this.$refs.loadmore.onTopLoaded()})):e.Toast(i.data.error||"操作失败")}).catch(function(t){e.Toast(t||"网络异常")})},loadTop:function(){this.getData(!0)},loadBottom:function(){var t=this,e=this;if(!e.has_next)return setTimeout(function(){e.$refs.loadmore.onBottomLoaded()},500),!1;var i=this.api.weiboIndex();e.axios.get(i,{params:{weibo_id:this.$route.query.weibo_id,page:e.page}}).then(function(i){setTimeout(function(){if(1==i.data.status){if(e.has_next=i.data.has_next,e.page=e.page+1,i.data.comment_list&&i.data.comment_list.length&&i.data.comment_list.length>0)for(var n=0;n<i.data.comment_list.length;n++)e.comment_list.push(i.data.comment_list[n])}else t.Toast(i.data.error||"操作失败");e.$refs.loadmore.onBottomLoaded()},500)}).catch(function(i){t.Toast(i||"网络异常"),e.$refs.loadmore.onBottomLoaded()})},send:function(){var t=this;this.axios.post(this.api.userPublish_comment(),m.a.stringify({weibo_id:this.$route.query.weibo_id,content:this.content,type:1})).then(function(e){1==e.data.status?(t.Toast(e.data.error||"操作成功"),t.comment_list.unshift(e.data.comment),t.$nextTick(function(){t.content=""})):t.Toast(e.data.error||"操作失败")}).catch(function(e){t.Toast(e||"请求失败")})},showDelCommentSheet:function(t,e){t==this.userInfo.user_id&&(this.sheetVisible=!this.sheetVisible,this.currentCommentId=e)},delComment:function(){var t=this;this.axios.post(this.api.delComment(),m.a.stringify({comment_id:this.currentCommentId})).then(function(e){if(1==e.data.status){t.Toast(e.data.error||"操作成功");for(var i in t.comment_list)(t.comment_list[i].comment_id=t.currentCommentId)&&t.comment_list.splice(i,1)}else t.Toast(e.data.error||"操作失败")}).catch(function(e){t.Toast(e||"网络异常，请求失败")})},like:function(){var t=this;this.axios.post(this.api.userPublish_comment(),m.a.stringify({weibo_id:this.$route.query.weibo_id,content:this.content,type:2})).then(function(e){1==e.data.status?(t.Toast(e.data.error||"操作成功"),t.info.digg_count=e.data.has_digg?parseInt(t.info.digg_count)+1:parseInt(t.info.digg_count)-1,t.info.has_digg=e.data.has_digg):t.Toast(e.data.error||"操作失败")}).catch(function(e){t.Toast(e||"网络异常，请求失败")})},handleTopChange:function(t){this.topStatus=t},handleBottomChange:function(t){this.bottomStatus=t},addVideoCount:function(){var t=this;this.axios.post(this.api.addVideoCount(),m.a.stringify({weibo_id:this.$route.query.weibo_id})).then(function(e){1==e.data.status?t.info.video_count=e.data.video_count:t.Toast(e.data.error||"操作失败")}).catch(function(e){t.Toast(e||"网络异常，请求失败")})},scrollToEnd:function(){document.body.scrollTop=document.body.scrollHeight}},watch:{info:function(){var t=this;if(!t.tbsPlayer){var e=this.$refs.player,i=$(e).width(),n=$(e).height();t.tbsPlayer=new TcPlayer("tbs_video",{mp4:t.info.video_url,live:!1,controls:"default",coverpic:{src:t.info.photo_image},width:i,height:n,listener:function(e){"load"==e.type&&$("video").attr({"x5-video-player-type":"h5",playsinline:!0}),"play"==e.type&&t.addVideoCount()}})}},comment_list:function(){this.allLoaded=!Boolean(this.has_next)}},computed:a()({},i.i(r.d)({userInfo:"getUserInfo"}),{actions:function(){var t=this;return[{name:"删除",method:function(){t.delComment()}}]}})}},JoKC:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"video-detail"},[i("div",{staticClass:"detail"},[i("div",{ref:"player",staticClass:"player"},[i("div",{staticClass:"svideo-player",attrs:{id:"tbs_video"}})]),i("div",{staticClass:"detail-main"},[i("div",{staticClass:"avator"},[i("router-link",{attrs:{to:{path:"/user/others",query:{to_user_id:t.info.user_id}}}},[i("img",{attrs:{src:t.info.head_image||""}}),t.info.v_icon?i("img",{staticClass:"icon-vip",attrs:{src:t.info.v_icon||""}}):t._e()])],1),i("div",{staticClass:"info"},[i("div",{staticClass:"title"},[i("span",{staticClass:"name",domProps:{textContent:t._s(t.info.nick_name||"")}}),i("div",{staticClass:"total"},[i("span",{staticClass:"total-viewer"},[i("i",{staticClass:"icon iconfont"},[t._v("")]),i("span",{domProps:{textContent:t._s(t.info.video_count||"")}})]),1==t.info.has_digg?i("span",{staticClass:"total-liker liked",on:{click:t.like}},[i("i",{staticClass:"icon iconfont"},[t._v("")]),i("span",{domProps:{textContent:t._s(t.info.digg_count)}})]):i("span",{staticClass:"total-liker",on:{click:t.like}},[i("i",{staticClass:"icon iconfont"},[t._v("")]),i("span",{domProps:{textContent:t._s(t.info.digg_count)}})])])]),i("div",{staticClass:"sub-title",domProps:{textContent:t._s("视频简介:"+(t.info.content||""))}})])])]),i("div",{staticClass:"comment-list"},[i("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,"bottom-method":t.loadBottom,"bottom-all-loaded":t.allLoaded,autoFill:t.autoFill},on:{"top-status-change":t.handleTopChange,"bottom-status-change":t.handleBottomChange}},[i("mint-loadmore-top",{attrs:{slot:"top",topStatus:t.topStatus},slot:"top"}),i("div",{staticClass:"list-block media-list"},[t.comment_list&&t.comment_list.length?i("ul",[t._l(t.comment_list,function(e){return i("li",[i("div",{staticClass:"item-content"},[i("div",{staticClass:"item-media"},[i("router-link",{attrs:{to:{path:"/user/others",query:{to_user_id:e.user_id}}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.head_image,expression:"item.head_image"}],attrs:{width:"40"}})])],1),i("div",{staticClass:"item-inner",on:{click:function(i){t.showDelCommentSheet(e.user_id,e.comment_id)}}},[i("div",{staticClass:"item-title-row"},[i("div",{staticClass:"item-title",domProps:{textContent:t._s(e.nick_name)}}),i("div",{staticClass:"after",domProps:{textContent:t._s(e.left_time)}})]),i("div",{staticClass:"item-subtitle"},[i("span",{domProps:{textContent:t._s(e.content)}})])])])])}),t.allLoaded?i("div",{staticClass:"no-more-data"},[t._v("无更多数据")]):t._e()],2):i("null-data")],1),i("mint-loadmore-bottom",{directives:[{name:"show",rawName:"v-show",value:!t.allLoaded,expression:"!allLoaded"}],attrs:{slot:"bottom",bottomStatus:t.bottomStatus},slot:"bottom"})],1)],1),i("div",{staticClass:"float-comment"},[i("div",{staticClass:"float-comment-inner"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{type:"text",id:"input-chat-speak",placeholder:"请输入您的评论"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),i("span",{staticClass:"btn-send-comment",on:{click:t.send}},[t._v("发表评论")])])]),i("mt-actionsheet",{attrs:{actions:t.actions},model:{value:t.sheetVisible,callback:function(e){t.sheetVisible=e},expression:"sheetVisible"}})],1)},a=[],o={render:n,staticRenderFns:a};e.a=o},cHDi:function(t,e,i){"use strict";function n(t){i("1XS1")}Object.defineProperty(e,"__esModule",{value:!0});var a=i("3SRS"),o=i("JoKC"),s=i("J0+h"),d=n,A=s(a.a,o.a,d,"data-v-ffe71dc0",null);e.default=A.exports},q9b1:function(t,e,i){e=t.exports=i("xCYs")(!0),e.push([t.i,".svideo-player[data-v-ffe71dc0]{width:100%;height:100%}.video-detail[data-v-ffe71dc0]{padding-bottom:2.5rem}.player[data-v-ffe71dc0]{width:100%;height:56vw}.player img[data-v-ffe71dc0]{width:100%;height:100%}.detail-main[data-v-ffe71dc0]{padding:.5rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fff}.detail-main .avator[data-v-ffe71dc0]{position:relative;width:2.1rem;height:2.1rem;margin-right:.5rem;-ms-flex-negative:0;flex-shrink:0}.detail-main .avator img[data-v-ffe71dc0]{width:100%;height:100%;border-radius:2.1rem}.detail-main .avator .icon-vip[data-v-ffe71dc0]{position:absolute;bottom:0;right:0;width:.6rem;height:.6rem}.detail-main .info[data-v-ffe71dc0]{width:100%}.detail-main .title[data-v-ffe71dc0]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.detail-main .title .name[data-v-ffe71dc0]{width:65%;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.detail-main .title .total[data-v-ffe71dc0]{font-size:.6rem;color:#999}.detail-main .title .total .total-viewer[data-v-ffe71dc0]{margin-right:.5rem}.detail-main .title .total .iconfont[data-v-ffe71dc0]{font-size:.6rem;margin-right:.25rem}.detail-main .title .total .total-liker.liked[data-v-ffe71dc0]{color:#333}.detail-main .sub-title[data-v-ffe71dc0]{font-size:.55rem;color:#999}.detail-share[data-v-ffe71dc0]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:.5rem;background-color:#fff;border-top:1px solid #e5e5e5}.comment-list .list-block .item-content[data-v-ffe71dc0]{padding-left:.5rem;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.comment-list .list-block .item-inner[data-v-ffe71dc0]{margin-left:.5rem;padding-right:.5rem;-ms-flex-wrap:wrap;flex-wrap:wrap}.comment-list .list-block .item-subtitle[data-v-ffe71dc0]{font-size:.55rem;color:#999;white-space:normal}.comment-list .list-block .item-subtitle .nick-name[data-v-ffe71dc0]{color:#ff4d7f}.comment-list .list-block.media-list .item-media[data-v-ffe71dc0]{width:2rem;height:2rem;position:relative;padding:0;margin:.5rem 0}.comment-list .list-block.media-list .item-media a[data-v-ffe71dc0]{display:block;width:100%;height:100%}.comment-list .list-block.media-list .item-media img[data-v-ffe71dc0]{width:100%;height:100%;border-radius:10rem}.comment-list .after[data-v-ffe71dc0]{font-size:.55rem;color:#999}.float-comment[data-v-ffe71dc0]{position:fixed;bottom:0;left:0;width:100%;z-index:99;background-color:#fff}.float-comment .float-comment-inner[data-v-ffe71dc0]{width:100%;padding:.5rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.float-comment .float-comment-inner .btn-send-comment[data-v-ffe71dc0]{height:1.5rem;line-height:1.5rem;padding:0 .75rem;background-color:#333;color:#fff;border-radius:3px;-ms-flex-negative:0;flex-shrink:0;margin-left:.5rem}.float-comment .float-comment-inner input[data-v-ffe71dc0]{width:100%;height:1.5rem;border:0;background-color:#f3f3f3;border-radius:3px;padding:0 .5rem}","",{version:3,sources:["D:/phpStudy/WWW/yingke/frontEnd/weixin/src/views/video/detail.vue"],names:[],mappings:"AAsBA,gCACE,WAAY,AACZ,WAAa,CACd,AACD,+BACE,qBAAuB,CACxB,AACD,yBACE,WAAY,AACZ,WAAa,CACd,AACD,6BACE,WAAY,AACZ,WAAa,CACd,AACD,8BACE,cAAe,AACf,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AACtB,sBAAuB,AACnB,mBAAoB,AAC5B,qBAAuB,CACxB,AACD,sCACE,kBAAmB,AACnB,aAAc,AACd,cAAe,AACf,mBAAoB,AACpB,oBAAqB,AACjB,aAAe,CACpB,AACD,0CACE,WAAY,AACZ,YAAa,AACb,oBAAsB,CACvB,AACD,gDACE,kBAAmB,AACnB,SAAU,AACV,QAAS,AACT,YAAa,AACb,YAAc,CACf,AACD,oCACE,UAAY,CACb,AACD,qCACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AACtB,sBAAuB,AACnB,8BAA+B,AACvC,yBAA0B,AACtB,sBAAuB,AACnB,kBAAoB,CAC7B,AACD,2CACE,UAAW,AACX,cAAe,AACf,gBAAiB,AACjB,uBAAwB,AACxB,kBAAoB,CACrB,AACD,4CACE,gBAAiB,AACjB,UAAY,CACb,AACD,0DACE,kBAAoB,CACrB,AACD,sDACE,gBAAiB,AACjB,mBAAqB,CACtB,AACD,+DACE,UAAY,CACb,AACD,yCACE,iBAAkB,AAClB,UAAY,CACb,AACD,+BACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AACtB,sBAAuB,AACnB,8BAA+B,AACvC,cAAe,AACf,sBAAuB,AACvB,4BAA8B,CAC/B,AACD,yDACE,mBAAoB,AACpB,wBAAyB,AACrB,qBAAsB,AAClB,sBAAwB,CACjC,AACD,uDACE,kBAAmB,AACnB,oBAAqB,AACrB,mBAAoB,AAChB,cAAgB,CACrB,AACD,0DACE,iBAAkB,AAClB,WAAY,AACZ,kBAAoB,CACrB,AACD,qEACE,aAAe,CAChB,AACD,kEACE,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,UAAW,AACX,cAAgB,CACjB,AACD,oEACE,cAAe,AACf,WAAY,AACZ,WAAa,CACd,AACD,sEACE,WAAY,AACZ,YAAa,AACb,mBAAqB,CACtB,AACD,sCACE,iBAAkB,AAClB,UAAY,CACb,AACD,gCACE,eAAgB,AAChB,SAAU,AACV,OAAQ,AACR,WAAY,AACZ,WAAY,AACZ,qBAAuB,CACxB,AACD,qDACE,WAAY,AACZ,cAAe,AACf,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AACtB,sBAAuB,AACnB,kBAAoB,CAC7B,AACD,uEACE,cAAe,AACf,mBAAoB,AACpB,iBAAkB,AAClB,sBAAuB,AACvB,WAAY,AACZ,kBAAmB,AACnB,oBAAqB,AACjB,cAAe,AACnB,iBAAoB,CACrB,AACD,2DACE,WAAY,AACZ,cAAe,AACf,SAAU,AACV,yBAA0B,AAC1B,kBAAmB,AACnB,eAAiB,CAClB",file:"detail.vue",sourcesContent:["/*界面主题色*/\n/*背景色*/\n/*背景色（深）*/\n/*模块背景色*/\n/*主题风格色*/\n/*主题辅助风格色*/\n/*字体颜色*/\n/*主要字色*/\n/*浅色*/\n/*浅色*/\n/*更浅色（适用：二级标题、简介）*/\n/*更更浅色（适用：icon图标）*/\n/*标题*/\n/*字体大小*/\n/*线条颜色*/\n/*主要线条颜色*/\n/*更深线条颜色*/\n/*更浅线条颜色*/\n/*文本输入框边框颜色*/\n/*各类间距，高度*/\n/*横向间距*/\n/*纵向间距*/\n.svideo-player[data-v-ffe71dc0] {\n  width: 100%;\n  height: 100%;\n}\n.video-detail[data-v-ffe71dc0] {\n  padding-bottom: 2.5rem;\n}\n.player[data-v-ffe71dc0] {\n  width: 100%;\n  height: 56vw;\n}\n.player img[data-v-ffe71dc0] {\n  width: 100%;\n  height: 100%;\n}\n.detail-main[data-v-ffe71dc0] {\n  padding: .5rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  background-color: #fff;\n}\n.detail-main .avator[data-v-ffe71dc0] {\n  position: relative;\n  width: 2.1rem;\n  height: 2.1rem;\n  margin-right: .5rem;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n}\n.detail-main .avator img[data-v-ffe71dc0] {\n  width: 100%;\n  height: 100%;\n  border-radius: 2.1rem;\n}\n.detail-main .avator .icon-vip[data-v-ffe71dc0] {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: .6rem;\n  height: .6rem;\n}\n.detail-main .info[data-v-ffe71dc0] {\n  width: 100%;\n}\n.detail-main .title[data-v-ffe71dc0] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.detail-main .title .name[data-v-ffe71dc0] {\n  width: 65%;\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.detail-main .title .total[data-v-ffe71dc0] {\n  font-size: .6rem;\n  color: #999;\n}\n.detail-main .title .total .total-viewer[data-v-ffe71dc0] {\n  margin-right: .5rem;\n}\n.detail-main .title .total .iconfont[data-v-ffe71dc0] {\n  font-size: .6rem;\n  margin-right: .25rem;\n}\n.detail-main .title .total .total-liker.liked[data-v-ffe71dc0] {\n  color: #333;\n}\n.detail-main .sub-title[data-v-ffe71dc0] {\n  font-size: .55rem;\n  color: #999;\n}\n.detail-share[data-v-ffe71dc0] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  padding: .5rem;\n  background-color: #fff;\n  border-top: 1px solid #e5e5e5;\n}\n.comment-list .list-block .item-content[data-v-ffe71dc0] {\n  padding-left: .5rem;\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n.comment-list .list-block .item-inner[data-v-ffe71dc0] {\n  margin-left: .5rem;\n  padding-right: .5rem;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.comment-list .list-block .item-subtitle[data-v-ffe71dc0] {\n  font-size: .55rem;\n  color: #999;\n  white-space: normal;\n}\n.comment-list .list-block .item-subtitle .nick-name[data-v-ffe71dc0] {\n  color: #ff4d7f;\n}\n.comment-list .list-block.media-list .item-media[data-v-ffe71dc0] {\n  width: 2rem;\n  height: 2rem;\n  position: relative;\n  padding: 0;\n  margin: .5rem 0;\n}\n.comment-list .list-block.media-list .item-media a[data-v-ffe71dc0] {\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n.comment-list .list-block.media-list .item-media img[data-v-ffe71dc0] {\n  width: 100%;\n  height: 100%;\n  border-radius: 10rem;\n}\n.comment-list .after[data-v-ffe71dc0] {\n  font-size: .55rem;\n  color: #999;\n}\n.float-comment[data-v-ffe71dc0] {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  z-index: 99;\n  background-color: #fff;\n}\n.float-comment .float-comment-inner[data-v-ffe71dc0] {\n  width: 100%;\n  padding: .5rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.float-comment .float-comment-inner .btn-send-comment[data-v-ffe71dc0] {\n  height: 1.5rem;\n  line-height: 1.5rem;\n  padding: 0 .75rem;\n  background-color: #333;\n  color: #fff;\n  border-radius: 3px;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  margin-left: 0.5rem;\n}\n.float-comment .float-comment-inner input[data-v-ffe71dc0] {\n  width: 100%;\n  height: 1.5rem;\n  border: 0;\n  background-color: #f3f3f3;\n  border-radius: 3px;\n  padding: 0 .5rem;\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=15.f37b4366c2ea4d28ac40.js.map